# EVCS 前端功能测试清单

## 测试说明
按照以下清单逐项测试，记录测试结果。
- ✅ = 功能正常
- ❌ = 功能异常
- ⚠️ = 部分正常或有警告
- ⏭️ = 跳过测试

---

## 1. 登录与认证 ✅

### 1.1 登录功能
- [x] ✅ 使用 admin/password 登录成功
- [ ] JWT Token 正确保存到 localStorage
- [ ] 登录后自动跳转到 Dashboard
- [ ] 错误密码显示错误提示
- [ ] 退出登录功能

**验证方法**：
```javascript
// 打开浏览器控制台 (F12)，输入：
localStorage.getItem('token')
// 应该看到 JWT token 字符串
```

---

## 2. Dashboard (仪表盘)

### 2.1 页面加载
- [ ] Dashboard 页面正常显示
- [ ] 页面无 JavaScript 错误（F12 控制台检查）
- [ ] 数据统计卡片显示（租户数、用户数、充电站数等）

### 2.2 数据验证
- [ ] 统计数字是否正确
- [ ] 图表是否显示（如有）

**测试步骤**：
1. 登录后默认进入 Dashboard
2. 打开浏览器控制台 (F12) -> Console 标签
3. 检查是否有红色错误信息
4. 检查 Network 标签，查看 API 请求是否成功 (状态码 200)

---

## 3. 租户管理

### 3.1 租户列表 (路径: /tenants)
- [ ] 点击左侧菜单「租户管理」
- [ ] 租户列表正常加载
- [ ] 至少显示一条数据（ID=1 的默认租户）
- [ ] 列表显示：租户名称、状态、创建时间等
- [ ] 分页功能正常（如有）
- [ ] 搜索/筛选功能正常（如有）

### 3.2 查看租户详情
- [ ] 点击某个租户的「查看」或「详情」按钮
- [ ] 跳转到租户详情页 `/tenants/:id`
- [ ] 显示完整租户信息

### 3.3 新增租户
- [ ] 点击「新增租户」按钮
- [ ] 表单正常显示
- [ ] 填写必填字段（租户名称等）
- [ ] 点击「提交」成功创建
- [ ] 返回列表，新租户显示在列表中

### 3.4 编辑租户
- [ ] 点击某个租户的「编辑」按钮
- [ ] 表单加载现有数据
- [ ] 修改信息后提交
- [ ] 修改成功，列表数据更新

### 3.5 删除租户（谨慎测试）
- [ ] 删除功能存在（可能需要特定权限）
- [ ] 删除前有确认提示
- [ ] 删除后列表更新

### 3.6 租户树形视图 (路径: /tenants/tree)
- [ ] 如果有「树形视图」入口，点击查看
- [ ] 树形结构正常展示租户层级关系

**API 请求验证**：
打开浏览器 F12 -> Network 标签，应该看到：
- `GET /api/tenant/list` 或类似请求，状态码 200
- 响应数据包含租户列表

---

## 4. 用户管理

### 4.1 用户列表 (路径: /users)
- [ ] 点击左侧菜单「用户管理」
- [ ] 用户列表正常加载
- [ ] 至少显示 admin 用户
- [ ] 列表显示：用户名、姓名、角色、状态等
- [ ] 分页功能正常
- [ ] 搜索功能正常

### 4.2 查看用户详情
- [ ] 点击用户的「详情」按钮
- [ ] 跳转到用户详情页 `/users/:id`
- [ ] 显示用户完整信息

### 4.3 新增用户
- [ ] 点击「新增用户」按钮
- [ ] 表单正常显示
- [ ] 填写用户信息（用户名、密码、姓名等）
- [ ] 提交成功
- [ ] 新用户显示在列表

### 4.4 编辑用户
- [ ] 编辑现有用户信息
- [ ] 修改成功

### 4.5 角色管理 (路径: /roles)
- [ ] 如果有角色管理入口，点击查看
- [ ] 角色列表正常显示
- [ ] 可以查看角色权限

### 4.6 用户角色分配
- [ ] 给用户分配角色功能存在
- [ ] 分配后生效

**API 请求验证**：
- `GET /api/user/list` - 获取用户列表
- `POST /api/user` - 创建用户
- `PUT /api/user/:id` - 更新用户

---

## 5. 充电站管理

### 5.1 充电站列表 (路径: /stations)
- [ ] 点击左侧菜单「充电站管理」
- [ ] 充电站列表正常加载
- [ ] 列表显示：站点名称、地址、状态等
- [ ] 分页/搜索功能正常

### 5.2 查看充电站详情
- [ ] 点击「详情」按钮
- [ ] 跳转到详情页 `/stations/:id`
- [ ] 显示站点完整信息
- [ ] 显示该站点下的充电桩列表

### 5.3 新增充电站
- [ ] 点击「新增充电站」
- [ ] 填写站点信息（名称、地址、经纬度等）
- [ ] 提交成功

### 5.4 编辑充电站
- [ ] 编辑现有站点
- [ ] 修改成功

---

## 6. 充电桩管理

### 6.1 充电桩列表 (路径: /chargers)
- [ ] 点击左侧菜单「充电桩管理」
- [ ] 充电桩列表正常加载
- [ ] 列表显示：充电桩编号、所属站点、状态、功率等
- [ ] 可以按站点筛选

### 6.2 查看充电桩详情
- [ ] 点击「详情」按钮
- [ ] 跳转到详情页 `/chargers/:id`
- [ ] 显示充电桩详细信息
- [ ] 显示实时状态（在线/离线/充电中等）

### 6.3 新增充电桩
- [ ] 新增充电桩功能
- [ ] 关联到某个充电站
- [ ] 设置充电桩参数（功率、类型等）

### 6.4 编辑充电桩
- [ ] 编辑充电桩信息
- [ ] 修改成功

**API 请求验证**：
- `GET /api/station/list` - 充电站列表
- `GET /api/charger/list` - 充电桩列表
- `GET /api/charger/:id/status` - 充电桩实时状态

---

## 7. 订单管理

### 7.1 订单列表 (路径: /orders)
- [ ] 点击左侧菜单「订单管理」
- [ ] 订单列表正常加载
- [ ] 列表显示：订单号、用户、充电站、状态、金额等
- [ ] 分页功能正常
- [ ] 可以按状态筛选（进行中/已完成/已取消）
- [ ] 可以按日期范围筛选

### 7.2 查看订单详情
- [ ] 点击「详情」按钮
- [ ] 跳转到详情页 `/orders/:id`
- [ ] 显示订单完整信息：
  - 用户信息
  - 充电站和充电桩信息
  - 充电时长、电量
  - 费用明细
  - 订单状态变更历史

### 7.3 订单统计 (路径: /orders/dashboard)
- [ ] 订单统计页面
- [ ] 显示统计图表（充电量、收入、订单数等）
- [ ] 可以按时间范围查看统计

**API 请求验证**：
- `GET /api/order/list` - 订单列表
- `GET /api/order/:id` - 订单详情
- `GET /api/order/statistics` - 订单统计

---

## 8. 计费管理

### 8.1 计费方案列表 (路径: /billing-plans)
- [ ] 点击左侧菜单「计费方案」
- [ ] 计费方案列表正常加载
- [ ] 列表显示：方案名称、计费规则、状态等

### 8.2 新增计费方案 (路径: /billing-plans/new)
- [ ] 点击「新增计费方案」
- [ ] 填写方案信息：
  - 方案名称
  - 基础电价
  - 服务费
  - 时段计费（峰/平/谷）
- [ ] 提交成功

### 8.3 编辑计费方案 (路径: /billing-plans/:id/edit)
- [ ] 编辑现有计费方案
- [ ] 修改成功

---

## 9. 租户隔离验证 🔐

### 9.1 创建第二个租户
- [ ] 以 admin 身份新增一个测试租户（租户名：TestTenant）
- [ ] 为新租户创建一个管理员用户（用户名：test_admin）

### 9.2 准备测试数据
- [ ] 在租户1（admin）下创建一些数据：
  - 1个充电站
  - 2个充电桩
  - 1个订单
- [ ] 在租户2（test_admin）下创建不同的数据：
  - 1个充电站（不同名称）
  - 1个充电桩

### 9.3 数据隔离测试
- [ ] 以 admin 登录，记录能看到的数据
- [ ] 退出登录
- [ ] 以 test_admin 登录（租户2）
- [ ] 验证只能看到租户2的数据
- [ ] 验证看不到租户1的数据（充电站、充电桩、订单等）
- [ ] 尝试通过 URL 直接访问租户1的资源详情页（应该403或404）

**关键验证点**：
- 用户列表：只显示本租户用户
- 充电站列表：只显示本租户充电站
- 订单列表：只显示本租户订单
- 统计数据：只统计本租户数据

---

## 10. 常规功能测试

### 10.1 导航与路由
- [ ] 左侧菜单所有项目都能正常点击
- [ ] 页面切换流畅，无卡顿
- [ ] 浏览器前进/后退按钮正常工作
- [ ] 刷新页面后状态保持（不会退出登录）

### 10.2 权限控制
- [ ] 不同角色看到不同的菜单项（如有）
- [ ] 无权限的功能按钮不可点击或隐藏

### 10.3 错误处理
- [ ] 网络错误时有友好提示
- [ ] 表单验证错误提示清晰
- [ ] 404 页面正常（访问不存在的路径）

### 10.4 性能
- [ ] 列表加载速度可接受（< 2秒）
- [ ] 页面切换响应快（< 500ms）
- [ ] 无内存泄漏（长时间使用不卡顿）

---

## 快速验证步骤 ⚡

如果时间有限，按以下优先级测试：

### 🔴 P0 - 必须测试（核心流程）
1. ✅ 登录/登出
2. Dashboard 显示
3. 租户列表查看
4. 用户列表查看
5. 充电站列表查看
6. 订单列表查看

### 🟡 P1 - 重要测试（CRUD 操作）
7. 新增租户
8. 新增用户
9. 新增充电站
10. 查看订单详情

### 🟢 P2 - 可选测试（高级功能）
11. 租户隔离验证
12. 统计报表
13. 权限控制
14. 编辑/删除操作

---

## 测试记录模板

### 测试环境
- 浏览器：Chrome/Edge/Firefox [版本]
- 测试时间：2025-10-27
- 后端服务：全部运行
- 前端地址：http://127.0.0.1:3000

### 发现的问题
| 序号 | 模块 | 问题描述 | 严重程度 | 截图 |
|------|------|----------|----------|------|
| 1    |      |          |          |      |

### 测试结论
- [ ] 全部通过
- [ ] 部分通过（记录问题）
- [ ] 未通过（阻塞问题）

---

## 浏览器调试技巧

### 查看 API 请求
1. 按 F12 打开开发者工具
2. 切换到 **Network** 标签
3. 刷新页面或执行操作
4. 查看 API 请求：
   - 请求 URL
   - 状态码（200=成功，401=未授权，403=无权限，500=服务器错误）
   - 响应数据（Response 标签）

### 查看控制台错误
1. 按 F12 打开开发者工具
2. 切换到 **Console** 标签
3. 红色文字 = 错误
4. 黄色文字 = 警告

### 查看 LocalStorage
1. 按 F12 打开开发者工具
2. 切换到 **Application** 标签（Chrome）或 **Storage** 标签（Firefox）
3. 左侧选择 **Local Storage** -> http://127.0.0.1:3000
4. 查看 token、userId、tenantId 等存储的值

---

## 常见问题排查

### 问题：页面空白
- 检查控制台是否有 JavaScript 错误
- 检查 Network 请求是否失败
- 检查 Vite 服务是否正常运行

### 问题：数据不显示
- 检查 Network 请求状态码
- 检查响应数据是否为空
- 检查后端服务是否正常

### 问题：API 请求 404
- 检查 Gateway 服务是否运行
- 检查 Vite 代理配置（vite.config.ts）
- 检查后端路由配置

### 问题：API 请求 401 未授权
- 检查 token 是否存在（localStorage.getItem('token')）
- 检查 token 是否过期
- 尝试重新登录

---

## 总结

完成测试后，您应该能回答：
1. ✅ 哪些功能正常工作
2. ❌ 哪些功能有问题
3. ⏭️ 哪些功能暂未测试

这样可以清楚地了解系统的整体状态！
