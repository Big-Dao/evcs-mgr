# Docker环境配置
spring:
  application:
    name: evcs-gateway
  
  # Config Server 已在 JAVA_OPTS 中配置，这里不需要禁用
  cloud:
    discovery:
      enabled: true
      
  # Redis配置
  data:
    redis:
      host: ${SPRING_REDIS_HOST:redis}
      port: ${SPRING_REDIS_PORT:6379}
      password: ${SPRING_REDIS_PASSWORD:}

  # 禁用数据源自动配置
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# 服务端口
server:
  port: 8080

# Eureka客户端配置
eureka:
  client:
    service-url:
      defaultZone: ${EUREKA_SERVER_URL:http://localhost:8761/eureka/}
    register-with-eureka: true
    fetch-registry: true
  instance:
    prefer-ip-address: true

# 日志配置
logging:
  level:
    root: INFO
    com.evcs.gateway: DEBUG

# JWT配置
jwt:
  secret: ${JWT_SECRET:evcs-secret-key-change-in-production}
  expire: 7200

# Actuator配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,gateway
  endpoint:
    health:
      show-details: always
